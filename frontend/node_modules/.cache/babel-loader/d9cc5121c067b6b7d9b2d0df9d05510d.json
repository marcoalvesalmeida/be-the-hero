{"ast":null,"code":"import _regeneratorRuntime from\"/home/marco/PESSOAL/be-the-hero/frontend/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/home/marco/PESSOAL/be-the-hero/frontend/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"/home/marco/PESSOAL/be-the-hero/frontend/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useState}from'react';import{Link,useHistory}from'react-router-dom';import{FiArrowLeft}from'react-icons/fi';import'./styles.css';import logoImg from\"../../assets/logo.svg\";import api from'../../services/api';export default function Register(){var history=useHistory();var _useState=useState(\"\"),_useState2=_slicedToArray(_useState,2),title=_useState2[0],setTitle=_useState2[1];var _useState3=useState(\"\"),_useState4=_slicedToArray(_useState3,2),description=_useState4[0],setDescription=_useState4[1];var _useState5=useState(\"\"),_useState6=_slicedToArray(_useState5,2),value=_useState6[0],setValue=_useState6[1];var ong_id=localStorage.getItem('ong_id');function handleNew(_x){return _handleNew.apply(this,arguments);}function _handleNew(){_handleNew=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(e){var data;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:e.preventDefault();data={title:title,description:description,value:value};_context.prev=2;_context.next=5;return api.post('incidents',data,{headers:{Authorization:ong_id}});case 5:history.push('/profile');_context.next=11;break;case 8:_context.prev=8;_context.t0=_context[\"catch\"](2);alert(\"Não foi possível cadastrar o caso, tente novamente!\");case 11:case\"end\":return _context.stop();}}},_callee,null,[[2,8]]);}));return _handleNew.apply(this,arguments);}return/*#__PURE__*/React.createElement(\"div\",{className:\"new-incident-container\"},/*#__PURE__*/React.createElement(\"div\",{className:\"content\"},/*#__PURE__*/React.createElement(\"section\",null,/*#__PURE__*/React.createElement(\"img\",{src:logoImg,alt:\"Be The Hero\"}),/*#__PURE__*/React.createElement(\"h1\",null,\"Cadastrar novo caso\"),/*#__PURE__*/React.createElement(\"p\",null,\"Descreva o caso detalhadamente para encontrar um her\\xF3i para resolver isso.\"),/*#__PURE__*/React.createElement(Link,{className:\"back-link\",to:\"/profile\"},/*#__PURE__*/React.createElement(FiArrowLeft,{size:16}),\"Voltar para home\")),/*#__PURE__*/React.createElement(\"form\",{onSubmit:handleNew},/*#__PURE__*/React.createElement(\"input\",{placeholder:\"T\\xEDtulo do caso\",value:title,onChange:function onChange(e){return setTitle(e.target.value);}}),/*#__PURE__*/React.createElement(\"textarea\",{placeholder:\"Descri\\xE7\\xE3o\",value:description,onChange:function onChange(e){return setDescription(e.target.value);}}),/*#__PURE__*/React.createElement(\"input\",{placeholder:\"Valor em reais\",value:value,onChange:function onChange(e){return setValue(e.target.value);}}),/*#__PURE__*/React.createElement(\"button\",{className:\"button\",type:\"submit\"},\"Cadastrar\"))));}","map":{"version":3,"sources":["/home/marco/PESSOAL/be-the-hero/frontend/src/pages/NewIncident/index.js"],"names":["React","useState","Link","useHistory","FiArrowLeft","api","Register","history","title","setTitle","description","setDescription","value","setValue","ong_id","localStorage","getItem","handleNew","e","preventDefault","data","post","headers","Authorization","push","alert","logoImg","target"],"mappings":"8WAAA,MAAOA,CAAAA,KAAP,EAAgBC,QAAhB,KAAgC,OAAhC,CACA,OAASC,IAAT,CAAeC,UAAf,KAAiC,kBAAjC,CACA,OAASC,WAAT,KAA4B,gBAA5B,CAEA,MAAO,cAAP,C,2CAEA,MAAOC,CAAAA,GAAP,KAAgB,oBAAhB,CAEA,cAAe,SAASC,CAAAA,QAAT,EAAoB,CAChC,GAAMC,CAAAA,OAAO,CAAGJ,UAAU,EAA1B,CADgC,cAENF,QAAQ,CAAC,EAAD,CAFF,wCAEzBO,KAFyB,eAElBC,QAFkB,8BAGMR,QAAQ,CAAC,EAAD,CAHd,yCAGzBS,WAHyB,eAGZC,cAHY,8BAINV,QAAQ,CAAC,EAAD,CAJF,yCAIzBW,KAJyB,eAIlBC,QAJkB,eAMhC,GAAMC,CAAAA,MAAM,CAAGC,YAAY,CAACC,OAAb,CAAqB,QAArB,CAAf,CANgC,QAQjBC,CAAAA,SARiB,uIAQhC,iBAAyBC,CAAzB,2HACGA,CAAC,CAACC,cAAF,GAEMC,IAHT,CAGgB,CACVZ,KAAK,CAALA,KADU,CAEVE,WAAW,CAAXA,WAFU,CAGVE,KAAK,CAALA,KAHU,CAHhB,uCAUYP,CAAAA,GAAG,CAACgB,IAAJ,CAAS,WAAT,CAAsBD,IAAtB,CAA4B,CAC/BE,OAAO,CAAE,CACNC,aAAa,CAAET,MADT,CADsB,CAA5B,CAVZ,QAgBMP,OAAO,CAACiB,IAAR,CAAa,UAAb,EAhBN,+EAkBMC,KAAK,CAAC,qDAAD,CAAL,CAlBN,oEARgC,4CA+BhC,mBACG,2BAAK,SAAS,CAAC,wBAAf,eACG,2BAAK,SAAS,CAAC,SAAf,eACG,gDACG,2BAAK,GAAG,CAAEC,OAAV,CAAmB,GAAG,CAAC,aAAvB,EADH,cAGG,oDAHH,cAIG,6GAJH,cAMG,oBAAC,IAAD,EAAM,SAAS,CAAC,WAAhB,CAA4B,EAAE,CAAC,UAA/B,eACG,oBAAC,WAAD,EAAa,IAAI,CAAE,EAAnB,EADH,oBANH,CADH,cAaG,4BAAM,QAAQ,CAAET,SAAhB,eACG,6BACG,WAAW,CAAC,mBADf,CAEG,KAAK,CAAET,KAFV,CAGG,QAAQ,CAAE,kBAAAU,CAAC,QAAIT,CAAAA,QAAQ,CAACS,CAAC,CAACS,MAAF,CAASf,KAAV,CAAZ,EAHd,EADH,cAMG,gCACG,WAAW,CAAC,iBADf,CAEG,KAAK,CAAEF,WAFV,CAGG,QAAQ,CAAE,kBAAAQ,CAAC,QAAIP,CAAAA,cAAc,CAACO,CAAC,CAACS,MAAF,CAASf,KAAV,CAAlB,EAHd,EANH,cAYG,6BACG,WAAW,CAAC,gBADf,CAEG,KAAK,CAAEA,KAFV,CAGG,QAAQ,CAAE,kBAAAM,CAAC,QAAIL,CAAAA,QAAQ,CAACK,CAAC,CAACS,MAAF,CAASf,KAAV,CAAZ,EAHd,EAZH,cAkBG,8BAAQ,SAAS,CAAC,QAAlB,CAA2B,IAAI,CAAC,QAAhC,cAlBH,CAbH,CADH,CADH,CAsCF","sourcesContent":["import React, { useState } from 'react';\nimport { Link, useHistory } from 'react-router-dom';\nimport { FiArrowLeft } from 'react-icons/fi';\n\nimport './styles.css';\nimport logoImg from '../../assets/logo.svg';\nimport api from '../../services/api';\n\nexport default function Register() {\n   const history = useHistory();\n   const [title, setTitle] = useState(\"\");\n   const [description, setDescription] = useState(\"\");\n   const [value, setValue] = useState(\"\");\n\n   const ong_id = localStorage.getItem('ong_id');\n\n   async function handleNew(e){\n      e.preventDefault();\n\n      const data = {\n         title,\n         description,\n         value\n      }\n\n      try {\n         await api.post('incidents', data, {\n            headers: {\n               Authorization: ong_id\n            }\n         });\n         \n         history.push('/profile'); \n      } catch (err) {\n         alert(\"Não foi possível cadastrar o caso, tente novamente!\");\n      }\n\n   }\n\n   return (\n      <div className=\"new-incident-container\">\n         <div className=\"content\">\n            <section>\n               <img src={logoImg} alt=\"Be The Hero\"/>\n\n               <h1>Cadastrar novo caso</h1>\n               <p>Descreva o caso detalhadamente para encontrar um herói para resolver isso.</p>\n\n               <Link className=\"back-link\" to=\"/profile\">\n                  <FiArrowLeft size={16} />\n                  Voltar para home\n               </Link>            \n            </section>\n\n            <form onSubmit={handleNew}>\n               <input \n                  placeholder=\"Título do caso\"\n                  value={title}\n                  onChange={e => setTitle(e.target.value)} \n               />\n               <textarea \n                  placeholder=\"Descrição\" \n                  value={description}\n                  onChange={e => setDescription(e.target.value)} \n               />\n\n               <input \n                  placeholder=\"Valor em reais\" \n                  value={value}\n                  onChange={e => setValue(e.target.value)} \n               />\n               \n               <button className=\"button\" type=\"submit\">Cadastrar</button>\n            </form>\n         </div>\n      </div>\n   )\n}"]},"metadata":{},"sourceType":"module"}